# Bootstrap configurations - loaded before application.yml when 'test' profile is active

spring:
  profiles:
    active: test
  application:
    # Service name - MUST match the config file name (e.g., mall-service.yml) and Eureka ID
    name: mall-service-test # Test için farklı bir isim de verebiliriz, Eureka'da karışmaması için
  cloud:
    bootstrap:
      enabled: false # Disable Spring Cloud Bootstrap context for tests
    config:
      # URI of the Config Server - Testlerde kullanılmayacak
      # uri: http://localhost:8888 
      enabled: false # Config Server'ı testler için devre dışı bırak
      fail-fast: false # Config Server bulunamazsa hata verme
      import-check:
        enabled: false # İmport kontrolünü kapat
    discovery:
      enabled: false # Service discovery'i kapat
    service-registry:
      auto-registration:
        enabled: false # Service registry'e otomatik kaydı kapat
  config:
    import: optional:classpath:/

# Logging
logging:
  level:
    root: INFO
    org.springframework.cloud.config: OFF # ÖZEL: Config Client loglarını kapat
    org.springframework.boot.context.config: OFF # ÖZEL: Config ile ilgili diğer logları kapat
    com.avmerkez: DEBUG

# Flyway configuration for tests (Testcontainers ile yönetilecekse burası pasif olabilir)
flyway:
  enabled: false # Testlerde Flyway'i devre dışı bırakabiliriz, şemayı Testcontainers veya ddl-auto yönetsin
  # baseline-on-migrate: true 

# Eureka Client Configuration (Testlerde Eureka'ya bağlanması gerekmeyebilir)
eureka:
  client:
    enabled: false # Testlerde Eureka'yı devre dışı bırak
    registerWithEureka: false
    fetchRegistry: false
  # instance:
    # prefer-ip-address: true

# Management port for Actuator health checks (Testlerde farklı bir port kullanılabilir veya actuator devre dışı bırakılabilir)
# management:
#   server:
#     port: 9091 # Testler için farklı bir port
#   endpoints:
#     web:
#       exposure:
#         include: "*" # Testlerde tüm actuator endpoint'lerini açabiliriz veya kapatabiliriz
#     enabled-by-default: false # Testlerde actuator'ı varsayılan olarak kapat 